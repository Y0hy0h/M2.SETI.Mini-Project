webpackJsonp([1],{0:function(e,t,n){e.exports=n("x35b")},AS41:function(e,t,n){e.exports=n.p+"img/background.38571b2d.jpg"},OYMq:function(e,t){},TJGl:function(e,t){},scU2:function(e,t){},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("4bK6"),r=n.n(a),i=n("Z60a"),c=n.n(i),s=n("T/v0"),o=n.n(s),l=n("j/rp"),u=n.n(l),f=n("Oy1H"),p=n.n(f),h=n("EOM2"),d=(n("A0n/"),n("fx22"),n("rzQm")),v=n.n(d),b=n("C9uT"),y=n.n(b),m=n("M4fF"),g=n("9Otz"),_=n.n(g),w=function(){function e(t,n,a){c()(this,e),this.id=t,this.capacity=n,this.occupied=a}return y()(e,[{key:"free",get:function(){return this.capacity-this.occupied}}]),e}(),P=this&&this.__decorate||function(e,t,n,a){var r,i=arguments.length,c=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":p()(Reflect))&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},O=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":p()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},k=function(e){function t(){var e;return c()(this,t),e=o()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.colorFree=_()("#eeeeee"),e.colorOccupied=_()("#777777"),e.colorSelected=_()("#efdc05"),e.size=275,e.randomForPlace=e.places.map(function(){return Math.random()}),e}return u()(t,e),y()(t,[{key:"getPlaceShape",value:function(e){var t=this.colorFree,n=this.requestedPlaces<=this.tableData.free&&e<this.tableData.occupied+this.requestedPlaces;n&&(t=this.colorSelected);var a=e<this.tableData.occupied;a&&(t=this.colorOccupied);var r=.15*this.size/2,i=this.tableShape.r+r+10,c=e/this.tableData.capacity*360-135+Math.floor(15*this.randomForPlace[e]);return{cx:0,cy:i,r:r,fill:t,transform:"translate(".concat(this.size/2,", ").concat(this.size/2,") rotate(").concat(c,")")}}},{key:"fake",get:function(){return this.tableData.id<0}},{key:"places",get:function(){for(var e=this.tableData.capacity,t=new Array(e),n=0;n<e;n++)t[n]=n;return t}},{key:"tableShape",get:function(){var e=this.colorFree.mix(this.colorOccupied,this.tableData.occupied/this.tableData.capacity);return 0<this.requestedPlaces&&this.requestedPlaces<=this.tableData.free&&(e=this.colorSelected),{cx:this.size/2,cy:this.size/2,r:.5*this.size/2,fill:e}}},{key:"placeShapes",get:function(){return v()(Array(this.tableData.capacity).keys()).map(this.getPlaceShape)}}]),t}(h["Vue"]);P([Object(h["Prop"])(),O("design:type","function"===typeof(q="undefined"!==typeof w&&w)&&q||Object)],k.prototype,"tableData",void 0),P([Object(h["Prop"])(),O("design:type",Number)],k.prototype,"requestedPlaces",void 0),k=P([h["Component"],O("design:paramtypes",[])],k);var q,x=k,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("svg",{ref:"canvas",attrs:{version:"1.1",baseProfile:"full",width:e.size,height:e.size,viewbox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg"}},[n("circle",e._b({},"circle",e.tableShape,!1)),e._l(e.placeShapes,function(t){return n("circle",e._b({},"circle",t,!1))})],2),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.fake,expression:"!fake"}],staticClass:"places-left"},[e._v(e._s(e.tableData.free)+"/"+e._s(e.tableData.capacity))])])},R=[],C=n("XyMi");function D(e){n("TJGl")}var T=!1,S=D,z="data-v-5e836146",M=null,F=Object(C["a"])(x,j,R,T,S,z,M),J=F.exports,A=(n("SldL"),n("y9m4"),n("mtWM")),E=n.n(A),V=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,i){function c(e){try{o(a.next(e))}catch(e){i(e)}}function s(e){try{o(a["throw"](e))}catch(e){i(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,s)}o((a=a.apply(e,t||[])).next())})},$=function(){function e(){c()(this,e),this.url="http://192.168.0.58/serveur/process.php"}return y()(e,[{key:"getJson",value:function(){return V(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(this.url);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}))}},{key:"getTables",value:function(){return V(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJson();case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return new w(e.id,parseInt(e.capacity),parseInt(e.occupied_places))}));case 4:case"end":return e.stop()}},e,this)}))}}]),e}(),I=this&&this.__decorate||function(e,t,n,a){var r,i=arguments.length,c=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":p()(Reflect))&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},G=function(e){function t(){var e;return c()(this,t),e=o()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments)),e.repository=new $,e.fakeTables=[new w(-100,4,3),new w(-101,4,4),new w(-102,4,2),new w(-103,4,4),new w(-104,4,3),new w(-105,4,1),new w(-106,4,2),new w(-107,4,4)],e.realTables=[new w(1,4,0),new w(2,4,1)],e.live=!1,e.requestedPlaces=3,e.minimumRequestedPlaces=0,e}return u()(t,e),y()(t,[{key:"mounted",value:function(){var e=this;this.repository.getTables().then(function(t){e.realTables=t,e.live=!0,setInterval(function(){e.live&&e.init()},1e3)}).catch(function(e){console.error(e),console.log("There was an error fetching the data, using fake data instead.")})}},{key:"init",value:function(){var e=this;this.repository.getTables().then(function(t){e.realTables=t}).catch(console.error)}},{key:"decrement",value:function(){this.requestedPlaces--,this.requestedPlaces<this.minimumRequestedPlaces&&(this.requestedPlaces=this.minimumRequestedPlaces)}},{key:"increment",value:function(){this.requestedPlaces++,this.requestedPlaces>this.maxCapacity&&(this.requestedPlaces=this.maxCapacity)}},{key:"tables",get:function(){var e=Object(m["cloneDeep"])(this.fakeTables);return e.splice.apply(e,[2,0].concat(v()(this.realTables))),e}},{key:"requestedPlacesFound",get:function(){var e=!0,t=!1,n=void 0;try{for(var a,r=this.tables[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value;if(i.free>=this.requestedPlaces)return!0}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return!1}},{key:"maxCapacity",get:function(){var e=this.tables.map(function(e){return e.capacity});return Math.max.apply(Math,v()(e))}}]),t}(h["Vue"]);G=I([Object(h["Component"])({components:{TableView:J}})],G);var N=G,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"overview"},[e._m(0),a("img",{staticClass:"background-image",attrs:{src:n("AS41")}}),a("div",{staticClass:"tables"},e._l(e.tables,function(t){return a("TableView",{key:t.id,attrs:{"table-data":t,"requested-places":e.requestedPlaces}})})),a("div",{staticClass:"input"},[a("span",{staticClass:"left"},[e._v("Je cherche")]),a("button",{staticClass:"minus",attrs:{disabled:e.requestedPlaces<=e.minimumRequestedPlaces},on:{click:function(t){e.decrement()}}},[e._v("\n            -\n        ")]),a("span",{staticClass:"amount",class:{invalid:!e.requestedPlacesFound}},[e._v(e._s(e.requestedPlaces))]),a("button",{staticClass:"plus",attrs:{disabled:e.requestedPlaces>=e.maxCapacity},on:{click:function(t){e.increment()}}},[e._v("\n            +\n        ")]),a("span",{staticClass:"right"},[e._v("place"+e._s(1===e.requestedPlaces?"":"s")+".")])])])},Y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("h1",{staticClass:"title"},[e._v("FastResto")])])}];function H(e){n("scU2")}var K=!1,L=H,Q="data-v-6a427b74",W=null,X=Object(C["a"])(N,U,Y,K,L,Q,W),Z=X.exports,B=this&&this.__decorate||function(e,t,n,a){var r,i=arguments.length,c=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":p()(Reflect))&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},ee=function(e){function t(){return c()(this,t),o()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),t}(h["Vue"]);ee=B([Object(h["Component"])({components:{Overview:Z}})],ee);var te=ee,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Overview")],1)},ae=[];function re(e){n("OYMq")}var ie=!1,ce=re,se=null,oe=null,le=Object(C["a"])(te,ne,ae,ie,ce,se,oe),ue=le.exports;r.a.config.productionTip=!1,new r.a({render:function(e){return e(ue)}}).$mount("#app")}},[0]);
//# sourceMappingURL=app.a3f61580.js.map